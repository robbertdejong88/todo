{% extends 'todo/base.html'%}

{% block content %}

<div class="row justify-content-start mt-4">
<div class="col-md-6">
  <form method="POST">
    {% csrf_token %}
    {{form}}
  </form>
</div>
</div>


<div class="row justify-content-start mt-2">
<div class="col-md-6">
  <table class="table">
    <tbody id='table_body'>

    </tbody>
  </table>
</div>
</div>

{% endblock%}
<a href=""><i class='fas fa-user-plus'></i></a>

{% block script%}

  <script>

   	$("#id_user").keyup(function () {
      var user = $(this).val();

      $.ajax({
        url: "{% url 'todo_ajax_show_users' %}",
        data: {
          'user': user
        },
        dataType: 'json',
        success: function (data) {
        	html = ''
        	for(var i = 0; i < data.length; i++){
        		var id = data[i].pk;
        		var name = data[i].fields.username;
        		html = html + "<tr><td>"+name+"</td><td><a href='#'><i class='fas fa-user-plus'></i></a></td></tr>"
        	}
        	document.getElementById('table_body').innerHTML = (html);
        }
      });
    });

    
  </script>


{% endblock %}
<!-- 
        <tr>
          <td>...</td>
          <td>...</td>
          <td><a href="#"><i class="fas fa-check"></i></a></td>
        </tr> -->